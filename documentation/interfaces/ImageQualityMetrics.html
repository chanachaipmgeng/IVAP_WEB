<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">frontend documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">

















<ol class="breadcrumb">
  <li class="breadcrumb-item">Interfaces</li>
  <li class="breadcrumb-item"
  >
  ImageQualityMetrics</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/shared/utils/image-quality.utils.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Image Quality Utilities
Functions for analyzing image quality for face recognition</p>

            </p>


        <section data-compodoc="block-index">
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#blurriness" 
>
                                            blurriness
                                        </a>
                                </li>
                                <li>
                                        <a href="#brightness" 
>
                                            brightness
                                        </a>
                                </li>
                                <li>
                                        <a href="#contrast" 
>
                                            contrast
                                        </a>
                                </li>
                                <li>
                                        <a href="#quality" 
>
                                            quality
                                        </a>
                                </li>
                                <li>
                                        <a href="#recommendations" 
>
                                            recommendations
                                        </a>
                                </li>
                                <li>
                                        <a href="#sharpness" 
>
                                            sharpness
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section data-compodoc="block-properties">
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="blurriness"></a>
                                        <span class="name "><b>blurriness</b>
                                            <a href="#blurriness">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>blurriness:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="brightness"></a>
                                        <span class="name "><b>brightness</b>
                                            <a href="#brightness">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>brightness:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="contrast"></a>
                                        <span class="name "><b>contrast</b>
                                            <a href="#contrast">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>contrast:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="quality"></a>
                                        <span class="name "><b>quality</b>
                                            <a href="#quality">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>quality:     <code>&quot;excellent&quot; | &quot;good&quot; | &quot;fair&quot; | &quot;poor&quot;</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>&quot;excellent&quot; | &quot;good&quot; | &quot;fair&quot; | &quot;poor&quot;</code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="recommendations"></a>
                                        <span class="name "><b>recommendations</b>
                                            <a href="#recommendations">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>recommendations:     <code>string[]</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>string[]</code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="sharpness"></a>
                                        <span class="name "><b>sharpness</b>
                                            <a href="#sharpness">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>sharpness:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">export interface ImageQualityMetrics {
  brightness: number;
  blurriness: number;
  contrast: number;
  sharpness: number;
  quality: &#x27;excellent&#x27; | &#x27;good&#x27; | &#x27;fair&#x27; | &#x27;poor&#x27;;
  recommendations: string[];
}

/**
 * Calculate image brightness using luminance formula
 * @param imageData ImageData object from canvas
 * @returns Brightness value (0-255)
 */
export function calculateBrightness(imageData: ImageData): number {
  const data &#x3D; imageData.data;
  let brightness &#x3D; 0;

  for (let i &#x3D; 0; i &lt; data.length; i +&#x3D; 4) {
    const r &#x3D; data[i];
    const g &#x3D; data[i + 1];
    const b &#x3D; data[i + 2];

    // Calculate luminance using standard formula
    const luminance &#x3D; 0.299 * r + 0.587 * g + 0.114 * b;
    brightness +&#x3D; luminance;
  }

  return brightness / (data.length / 4);
}

/**
 * Calculate image blurriness using Laplacian variance
 * @param imageData ImageData object from canvas
 * @returns Blurriness value (higher &#x3D; more blurry)
 */
export function calculateLaplacian(imageData: ImageData): number {
  const data &#x3D; imageData.data;
  const width &#x3D; imageData.width;
  const height &#x3D; imageData.height;
  let laplacian &#x3D; 0;

  // Convert to grayscale first
  const gray &#x3D; new Uint8Array(width * height);
  for (let i &#x3D; 0; i &lt; data.length; i +&#x3D; 4) {
    const r &#x3D; data[i];
    const g &#x3D; data[i + 1];
    const b &#x3D; data[i + 2];
    gray[i / 4] &#x3D; Math.round(0.299 * r + 0.587 * g + 0.114 * b);
  }

  // Apply Laplacian kernel
  for (let y &#x3D; 1; y &lt; height - 1; y++) {
    for (let x &#x3D; 1; x &lt; width - 1; x++) {
      const idx &#x3D; y * width + x;
      const center &#x3D; gray[idx];
      const top &#x3D; gray[idx - width];
      const bottom &#x3D; gray[idx + width];
      const left &#x3D; gray[idx - 1];
      const right &#x3D; gray[idx + 1];

      const laplacianValue &#x3D; Math.abs(4 * center - top - bottom - left - right);
      laplacian +&#x3D; laplacianValue;
    }
  }

  return laplacian / ((width - 2) * (height - 2));
}

/**
 * Calculate image contrast using standard deviation
 * @param imageData ImageData object from canvas
 * @returns Contrast value (0-255)
 */
export function calculateContrast(imageData: ImageData): number {
  const data &#x3D; imageData.data;
  const gray &#x3D; new Uint8Array(data.length / 4);

  // Convert to grayscale
  for (let i &#x3D; 0; i &lt; data.length; i +&#x3D; 4) {
    const r &#x3D; data[i];
    const g &#x3D; data[i + 1];
    const b &#x3D; data[i + 2];
    gray[i / 4] &#x3D; Math.round(0.299 * r + 0.587 * g + 0.114 * b);
  }

  // Calculate mean
  const mean &#x3D; gray.reduce((sum, val) &#x3D;&gt; sum + val, 0) / gray.length;

  // Calculate standard deviation
  const variance &#x3D; gray.reduce((sum, val) &#x3D;&gt; sum + Math.pow(val - mean, 2), 0) / gray.length;
  return Math.sqrt(variance);
}

/**
 * Calculate image sharpness using gradient magnitude
 * @param imageData ImageData object from canvas
 * @returns Sharpness value (higher &#x3D; sharper)
 */
export function calculateSharpness(imageData: ImageData): number {
  const data &#x3D; imageData.data;
  const width &#x3D; imageData.width;
  const height &#x3D; imageData.height;
  let sharpness &#x3D; 0;

  // Convert to grayscale
  const gray &#x3D; new Uint8Array(width * height);
  for (let i &#x3D; 0; i &lt; data.length; i +&#x3D; 4) {
    const r &#x3D; data[i];
    const g &#x3D; data[i + 1];
    const b &#x3D; data[i + 2];
    gray[i / 4] &#x3D; Math.round(0.299 * r + 0.587 * g + 0.114 * b);
  }

  // Calculate gradient magnitude
  for (let y &#x3D; 1; y &lt; height - 1; y++) {
    for (let x &#x3D; 1; x &lt; width - 1; x++) {
      const idx &#x3D; y * width + x;
      const center &#x3D; gray[idx];
      const right &#x3D; gray[idx + 1];
      const bottom &#x3D; gray[idx + width];

      const gx &#x3D; Math.abs(right - center);
      const gy &#x3D; Math.abs(bottom - center);
      const magnitude &#x3D; Math.sqrt(gx * gx + gy * gy);
      sharpness +&#x3D; magnitude;
    }
  }

  return sharpness / ((width - 2) * (height - 2));
}

/**
 * Get comprehensive image quality analysis
 * @param imageData ImageData object from canvas
 * @returns Complete quality metrics and recommendations
 */
export function analyzeImageQuality(imageData: ImageData): ImageQualityMetrics {
  const brightness &#x3D; calculateBrightness(imageData);
  const blurriness &#x3D; calculateLaplacian(imageData);
  const contrast &#x3D; calculateContrast(imageData);
  const sharpness &#x3D; calculateSharpness(imageData);

  const recommendations: string[] &#x3D; [];
  let quality: &#x27;excellent&#x27; | &#x27;good&#x27; | &#x27;fair&#x27; | &#x27;poor&#x27; &#x3D; &#x27;excellent&#x27;;

  // Analyze brightness
  if (brightness &lt; 50) {
    recommendations.push(&#x27;Image is too dark - move to a brighter area&#x27;);
    quality &#x3D; &#x27;poor&#x27;;
  } else if (brightness &lt; 80) {
    recommendations.push(&#x27;Image is slightly dark - consider better lighting&#x27;);
    if (quality &#x3D;&#x3D;&#x3D; &#x27;excellent&#x27;) quality &#x3D; &#x27;good&#x27;;
  } else if (brightness &gt; 200) {
    recommendations.push(&#x27;Image is too bright - avoid direct sunlight&#x27;);
    quality &#x3D; &#x27;poor&#x27;;
  } else if (brightness &gt; 180) {
    recommendations.push(&#x27;Image is slightly bright - consider softer lighting&#x27;);
    if (quality &#x3D;&#x3D;&#x3D; &#x27;excellent&#x27;) quality &#x3D; &#x27;good&#x27;;
  }

  // Analyze blurriness
  if (blurriness &lt; 50) {
    recommendations.push(&#x27;Image is very blurry - hold still and focus&#x27;);
    quality &#x3D; &#x27;poor&#x27;;
  } else if (blurriness &lt; 100) {
    recommendations.push(&#x27;Image is slightly blurry - hold still&#x27;);
    if (quality &#x3D;&#x3D;&#x3D; &#x27;excellent&#x27;) quality &#x3D; &#x27;good&#x27;;
  }

  // Analyze contrast
  if (contrast &lt; 30) {
    recommendations.push(&#x27;Image has low contrast - improve lighting conditions&#x27;);
    if (quality &#x3D;&#x3D;&#x3D; &#x27;excellent&#x27;) quality &#x3D; &#x27;good&#x27;;
  }

  // Analyze sharpness
  if (sharpness &lt; 20) {
    recommendations.push(&#x27;Image lacks sharpness - ensure proper focus&#x27;);
    if (quality &#x3D;&#x3D;&#x3D; &#x27;excellent&#x27;) quality &#x3D; &#x27;good&#x27;;
  }

  // Overall quality assessment
  if (recommendations.length &#x3D;&#x3D;&#x3D; 0) {
    quality &#x3D; &#x27;excellent&#x27;;
  } else if (recommendations.length &lt;&#x3D; 1) {
    quality &#x3D; &#x27;good&#x27;;
  } else if (recommendations.length &lt;&#x3D; 2) {
    quality &#x3D; &#x27;fair&#x27;;
  } else {
    quality &#x3D; &#x27;poor&#x27;;
  }

  return {
    brightness,
    blurriness,
    contrast,
    sharpness,
    quality,
    recommendations
  };
}

/**
 * Check if image quality is suitable for face recognition
 * @param imageData ImageData object from canvas
 * @returns true if quality is acceptable for face recognition
 */
export function isImageQualityAcceptable(imageData: ImageData): boolean {
  const metrics &#x3D; analyzeImageQuality(imageData);
  return metrics.quality &#x3D;&#x3D;&#x3D; &#x27;excellent&#x27; || metrics.quality &#x3D;&#x3D;&#x3D; &#x27;good&#x27;;
}

/**
 * Get quality feedback message for user
 * @param imageData ImageData object from canvas
 * @returns User-friendly feedback message
 */
export function getQualityFeedback(imageData: ImageData): string {
  const metrics &#x3D; analyzeImageQuality(imageData);

  if (metrics.quality &#x3D;&#x3D;&#x3D; &#x27;excellent&#x27;) {
    return &#x27;Perfect! Image quality is excellent for face recognition.&#x27;;
  } else if (metrics.quality &#x3D;&#x3D;&#x3D; &#x27;good&#x27;) {
    return &#x27;Good! Image quality is acceptable for face recognition.&#x27;;
  } else if (metrics.quality &#x3D;&#x3D;&#x3D; &#x27;fair&#x27;) {
    return &#x27;Fair. Consider improving lighting or focus for better results.&#x27;;
  } else {
    return &#x27;Poor quality. Please improve lighting, focus, and hold still.&#x27;;
  }
}

/**
 * Get specific recommendations for improving image quality
 * @param imageData ImageData object from canvas
 * @returns Array of specific recommendations
 */
export function getQualityRecommendations(imageData: ImageData): string[] {
  const metrics &#x3D; analyzeImageQuality(imageData);
  return metrics.recommendations;
}






</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'ImageQualityMetrics.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
