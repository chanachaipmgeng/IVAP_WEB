<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">frontend documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">

















<ol class="breadcrumb">
  <li class="breadcrumb-item">Interfaces</li>
  <li class="breadcrumb-item"
  >
  AccessibilityFeatures</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/services/accessibility.service.ts</code>
        </p>




        <section data-compodoc="block-index">
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#altText" 
>
                                            altText
                                        </a>
                                </li>
                                <li>
                                        <a href="#ariaLabels" 
>
                                            ariaLabels
                                        </a>
                                </li>
                                <li>
                                        <a href="#colorContrast" 
>
                                            colorContrast
                                        </a>
                                </li>
                                <li>
                                        <a href="#focusManagement" 
>
                                            focusManagement
                                        </a>
                                </li>
                                <li>
                                        <a href="#headings" 
>
                                            headings
                                        </a>
                                </li>
                                <li>
                                        <a href="#keyboardSupport" 
>
                                            keyboardSupport
                                        </a>
                                </li>
                                <li>
                                        <a href="#landmarks" 
>
                                            landmarks
                                        </a>
                                </li>
                                <li>
                                        <a href="#screenReaderSupport" 
>
                                            screenReaderSupport
                                        </a>
                                </li>
                                <li>
                                        <a href="#skipLinks" 
>
                                            skipLinks
                                        </a>
                                </li>
                                <li>
                                        <a href="#textScaling" 
>
                                            textScaling
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section data-compodoc="block-properties">
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="altText"></a>
                                        <span class="name "><b>altText</b>
                                            <a href="#altText">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>altText:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="ariaLabels"></a>
                                        <span class="name "><b>ariaLabels</b>
                                            <a href="#ariaLabels">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>ariaLabels:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="colorContrast"></a>
                                        <span class="name "><b>colorContrast</b>
                                            <a href="#colorContrast">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>colorContrast:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="focusManagement"></a>
                                        <span class="name "><b>focusManagement</b>
                                            <a href="#focusManagement">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>focusManagement:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="headings"></a>
                                        <span class="name "><b>headings</b>
                                            <a href="#headings">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>headings:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="keyboardSupport"></a>
                                        <span class="name "><b>keyboardSupport</b>
                                            <a href="#keyboardSupport">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>keyboardSupport:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="landmarks"></a>
                                        <span class="name "><b>landmarks</b>
                                            <a href="#landmarks">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>landmarks:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="screenReaderSupport"></a>
                                        <span class="name "><b>screenReaderSupport</b>
                                            <a href="#screenReaderSupport">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>screenReaderSupport:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="skipLinks"></a>
                                        <span class="name "><b>skipLinks</b>
                                            <a href="#skipLinks">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>skipLinks:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="textScaling"></a>
                                        <span class="name "><b>textScaling</b>
                                            <a href="#textScaling">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>textScaling:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, Inject, PLATFORM_ID, signal, computed } from &#x27;@angular/core&#x27;;
import { isPlatformBrowser } from &#x27;@angular/common&#x27;;
import { Observable } from &#x27;rxjs&#x27;;

export interface AccessibilitySettings {
  highContrast: boolean;
  largeText: boolean;
  reducedMotion: boolean;
  screenReader: boolean;
  keyboardNavigation: boolean;
  focusVisible: boolean;
  colorBlindSupport: boolean;
  fontSize: &#x27;small&#x27; | &#x27;medium&#x27; | &#x27;large&#x27; | &#x27;extra-large&#x27;;
  colorScheme: &#x27;light&#x27; | &#x27;dark&#x27; | &#x27;auto&#x27;;
  animationSpeed: &#x27;slow&#x27; | &#x27;normal&#x27; | &#x27;fast&#x27;;
  focusIndicator: &#x27;default&#x27; | &#x27;high&#x27; | &#x27;extra-high&#x27;;
  readingMode: boolean;
  voiceOver: boolean;
  magnifier: boolean;
  keyboardShortcuts: boolean;
}

export interface AccessibilityFeatures {
  skipLinks: boolean;
  landmarks: boolean;
  headings: boolean;
  altText: boolean;
  ariaLabels: boolean;
  focusManagement: boolean;
  colorContrast: boolean;
  textScaling: boolean;
  screenReaderSupport: boolean;
  keyboardSupport: boolean;
}

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class AccessibilityService {
  // ✅ Signals for reactive state
  private _settings &#x3D; signal&lt;AccessibilitySettings&gt;({
    highContrast: false,
    largeText: false,
    reducedMotion: false,
    screenReader: false,
    keyboardNavigation: true,
    focusVisible: true,
    colorBlindSupport: false,
    fontSize: &#x27;medium&#x27;,
    colorScheme: &#x27;auto&#x27;,
    animationSpeed: &#x27;normal&#x27;,
    focusIndicator: &#x27;default&#x27;,
    readingMode: false,
    voiceOver: false,
    magnifier: false,
    keyboardShortcuts: true
  });

  private _features &#x3D; signal&lt;AccessibilityFeatures&gt;({
    skipLinks: true,
    landmarks: true,
    headings: true,
    altText: true,
    ariaLabels: true,
    focusManagement: true,
    colorContrast: true,
    textScaling: true,
    screenReaderSupport: true,
    keyboardSupport: true
  });

  private _currentFocus &#x3D; signal&lt;HTMLElement | null&gt;(null);

  // ✅ Readonly signals for public access
  public readonly settings &#x3D; this._settings.asReadonly();
  public readonly features &#x3D; this._features.asReadonly();
  public readonly currentFocus &#x3D; this._currentFocus.asReadonly();

  // ✅ Computed signals for derived state
  public readonly isHighContrast &#x3D; computed(() &#x3D;&gt; this._settings().highContrast);
  public readonly isLargeText &#x3D; computed(() &#x3D;&gt; this._settings().largeText);
  public readonly isReducedMotion &#x3D; computed(() &#x3D;&gt; this._settings().reducedMotion);
  public readonly isScreenReader &#x3D; computed(() &#x3D;&gt; this._settings().screenReader);
  public readonly isKeyboardNavigation &#x3D; computed(() &#x3D;&gt; this._settings().keyboardNavigation);
  public readonly fontSize &#x3D; computed(() &#x3D;&gt; this._settings().fontSize);
  public readonly colorScheme &#x3D; computed(() &#x3D;&gt; this._settings().colorScheme);
  public readonly hasFocus &#x3D; computed(() &#x3D;&gt; this._currentFocus() !&#x3D;&#x3D; null);
  private focusHistory: HTMLElement[] &#x3D; [];

  constructor(@Inject(PLATFORM_ID) private platformId: Object) {
    if (isPlatformBrowser(this.platformId)) {
      this.initializeAccessibility();
      this.detectScreenReader();
      this.setupKeyboardNavigation();
      this.setupFocusManagement();
    }
  }

  // Settings Management
  getSettings(): Observable&lt;AccessibilitySettings&gt; {
    return new Observable&lt;AccessibilitySettings&gt;(observer &#x3D;&gt; {
      observer.next(this._settings());
      // Note: This is a compatibility layer - prefer using signals directly
    });
  }

  getCurrentSettings(): AccessibilitySettings {
    return this._settings();
  }

  updateSettings(updates: Partial&lt;AccessibilitySettings&gt;): void {
    const current &#x3D; this._settings();
    const updated &#x3D; { ...current, ...updates };
    this._settings.set(updated);
    this.applySettings(updated);
    this.saveSettings(updated);
  }

  // Features Management
  getFeatures(): Observable&lt;AccessibilityFeatures&gt; {
    return new Observable&lt;AccessibilityFeatures&gt;(observer &#x3D;&gt; {
      observer.next(this._features());
      // Note: This is a compatibility layer - prefer using signals directly
    });
  }

  getCurrentFeatures(): AccessibilityFeatures {
    return this._features();
  }

  updateFeatures(updates: Partial&lt;AccessibilityFeatures&gt;): void {
    const current &#x3D; this._features();
    const updated &#x3D; { ...current, ...updates };
    this._features.set(updated);
    this.applyFeatures(updated);
  }

  // Focus Management
  getCurrentFocus(): Observable&lt;HTMLElement | null&gt; {
    return new Observable&lt;HTMLElement | null&gt;(observer &#x3D;&gt; {
      observer.next(this._currentFocus());
      // Note: This is a compatibility layer - prefer using signals directly
    });
  }

  setFocus(element: HTMLElement | null): void {
    if (element) {
      this.focusHistory.push(element);
      element.focus();
      this._currentFocus.set(element);
    }
  }

  getPreviousFocus(): HTMLElement | null {
    return this.focusHistory[this.focusHistory.length - 2] || null;
  }

  clearFocusHistory(): void {
    this.focusHistory &#x3D; [];
  }

  // Keyboard Navigation
  setupKeyboardNavigation(): void {
    if (typeof document !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      document.addEventListener(&#x27;keydown&#x27;, this.handleKeyboardNavigation.bind(this));
    }
  }

  private handleKeyboardNavigation(event: KeyboardEvent): void {
    const settings &#x3D; this._settings();
    if (!settings.keyboardNavigation) return;

    // Skip links
    if (event.key &#x3D;&#x3D;&#x3D; &#x27;Tab&#x27; &amp;&amp; event.shiftKey) {
      this.handleSkipLinks(event);
    }

    // Focus management
    if (event.key &#x3D;&#x3D;&#x3D; &#x27;Tab&#x27;) {
      this.handleTabNavigation(event);
    }

    // Escape key
    if (event.key &#x3D;&#x3D;&#x3D; &#x27;Escape&#x27;) {
      this.handleEscapeKey(event);
    }

    // Arrow keys for navigation
    if ([&#x27;ArrowUp&#x27;, &#x27;ArrowDown&#x27;, &#x27;ArrowLeft&#x27;, &#x27;ArrowRight&#x27;].includes(event.key)) {
      this.handleArrowNavigation(event);
    }

    // Enter and Space for activation
    if ([&#x27;Enter&#x27;, &#x27; &#x27;].includes(event.key)) {
      this.handleActivation(event);
    }
  }

  private handleSkipLinks(event: KeyboardEvent): void {
    const skipLink &#x3D; document.querySelector(&#x27;[data-skip-link]&#x27;) as HTMLElement;
    if (skipLink) {
      event.preventDefault();
      this.setFocus(skipLink);
    }
  }

  private handleTabNavigation(event: KeyboardEvent): void {
    const focusableElements &#x3D; this.getFocusableElements();
    const currentIndex &#x3D; focusableElements.indexOf(document.activeElement as HTMLElement);

    if (event.shiftKey) {
      // Shift + Tab (backward)
      if (currentIndex &gt; 0) {
        this.setFocus(focusableElements[currentIndex - 1]);
      } else {
        this.setFocus(focusableElements[focusableElements.length - 1]);
      }
    } else {
      // Tab (forward)
      if (currentIndex &lt; focusableElements.length - 1) {
        this.setFocus(focusableElements[currentIndex + 1]);
      } else {
        this.setFocus(focusableElements[0]);
      }
    }
  }

  private handleEscapeKey(event: KeyboardEvent): void {
    // Close modals, dropdowns, etc.
    const modals &#x3D; document.querySelectorAll(&#x27;[data-modal]&#x27;);
    modals.forEach(modal &#x3D;&gt; {
      if (modal.classList.contains(&#x27;active&#x27;)) {
        modal.classList.remove(&#x27;active&#x27;);
        this.setFocus(document.querySelector(&#x27;[data-trigger]&#x27;) as HTMLElement);
      }
    });
  }

  private handleArrowNavigation(event: KeyboardEvent): void {
    const currentElement &#x3D; document.activeElement as HTMLElement;
    const parent &#x3D; currentElement.closest(&#x27;[role&#x3D;&quot;menu&quot;], [role&#x3D;&quot;listbox&quot;], [role&#x3D;&quot;grid&quot;]&#x27;);

    if (parent) {
      const items &#x3D; Array.from(parent.querySelectorAll(&#x27;[role&#x3D;&quot;menuitem&quot;], [role&#x3D;&quot;option&quot;], [role&#x3D;&quot;gridcell&quot;]&#x27;));
      const currentIndex &#x3D; items.indexOf(currentElement);

      let nextIndex &#x3D; currentIndex;
      switch (event.key) {
        case &#x27;ArrowUp&#x27;:
          nextIndex &#x3D; currentIndex &gt; 0 ? currentIndex - 1 : items.length - 1;
          break;
        case &#x27;ArrowDown&#x27;:
          nextIndex &#x3D; currentIndex &lt; items.length - 1 ? currentIndex + 1 : 0;
          break;
        case &#x27;ArrowLeft&#x27;:
          nextIndex &#x3D; currentIndex &gt; 0 ? currentIndex - 1 : items.length - 1;
          break;
        case &#x27;ArrowRight&#x27;:
          nextIndex &#x3D; currentIndex &lt; items.length - 1 ? currentIndex + 1 : 0;
          break;
      }

      if (nextIndex !&#x3D;&#x3D; currentIndex) {
        this.setFocus(items[nextIndex] as HTMLElement);
      }
    }
  }

  private handleActivation(event: KeyboardEvent): void {
    const currentElement &#x3D; document.activeElement as HTMLElement;

    if (currentElement.tagName &#x3D;&#x3D;&#x3D; &#x27;BUTTON&#x27; || currentElement.getAttribute(&#x27;role&#x27;) &#x3D;&#x3D;&#x3D; &#x27;button&#x27;) {
      event.preventDefault();
      currentElement.click();
    }
  }

  // Focus Management
  private setupFocusManagement(): void {
    if (typeof document !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      document.addEventListener(&#x27;focusin&#x27;, this.handleFocusIn.bind(this));
      document.addEventListener(&#x27;focusout&#x27;, this.handleFocusOut.bind(this));
    }
  }

  private handleFocusIn(event: FocusEvent): void {
    const target &#x3D; event.target as HTMLElement;
    this._currentFocus.set(target);
    this.updateFocusIndicator(target);
  }

  private handleFocusOut(event: FocusEvent): void {
    const target &#x3D; event.target as HTMLElement;
    target.classList.remove(&#x27;focus-visible&#x27;);
  }

  private updateFocusIndicator(element: HTMLElement): void {
    const settings &#x3D; this._settings();
    element.classList.add(&#x27;focus-visible&#x27;);

    // Apply focus indicator style based on settings
    const indicatorClass &#x3D; &#x60;focus-indicator-${settings.focusIndicator}&#x60;;
    element.classList.add(indicatorClass);
  }

  // Screen Reader Detection
  private detectScreenReader(): void {
    if (typeof window !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      // Check for screen reader specific properties
      const hasScreenReader &#x3D;
        &#x27;speechSynthesis&#x27; in window ||
        &#x27;webkitSpeechSynthesis&#x27; in window ||
        navigator.userAgent.includes(&#x27;NVDA&#x27;) ||
        navigator.userAgent.includes(&#x27;JAWS&#x27;) ||
        navigator.userAgent.includes(&#x27;VoiceOver&#x27;);

      this.updateSettings({ screenReader: hasScreenReader });
    }
  }

  // Settings Application
  private applySettings(settings: AccessibilitySettings): void {
    if (typeof document !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      const body &#x3D; document.body;

      // High contrast
      body.classList.toggle(&#x27;high-contrast&#x27;, settings.highContrast);

      // Large text
      body.classList.toggle(&#x27;large-text&#x27;, settings.largeText);

      // Reduced motion
      body.classList.toggle(&#x27;reduced-motion&#x27;, settings.reducedMotion);

      // Color blind support
      body.classList.toggle(&#x27;color-blind-support&#x27;, settings.colorBlindSupport);

      // Font size
      body.classList.remove(&#x27;font-small&#x27;, &#x27;font-medium&#x27;, &#x27;font-large&#x27;, &#x27;font-extra-large&#x27;);
      body.classList.add(&#x60;font-${settings.fontSize}&#x60;);

      // Color scheme
      body.classList.remove(&#x27;color-scheme-light&#x27;, &#x27;color-scheme-dark&#x27;, &#x27;color-scheme-auto&#x27;);
      body.classList.add(&#x60;color-scheme-${settings.colorScheme}&#x60;);

      // Animation speed
      body.classList.remove(&#x27;animation-slow&#x27;, &#x27;animation-normal&#x27;, &#x27;animation-fast&#x27;);
      body.classList.add(&#x60;animation-${settings.animationSpeed}&#x60;);

      // Focus indicator
      body.classList.remove(&#x27;focus-default&#x27;, &#x27;focus-high&#x27;, &#x27;focus-extra-high&#x27;);
      body.classList.add(&#x60;focus-${settings.focusIndicator}&#x60;);

      // Reading mode
      body.classList.toggle(&#x27;reading-mode&#x27;, settings.readingMode);

      // Voice over
      body.classList.toggle(&#x27;voice-over&#x27;, settings.voiceOver);

      // Magnifier
      body.classList.toggle(&#x27;magnifier&#x27;, settings.magnifier);
    }
  }

  private applyFeatures(features: AccessibilityFeatures): void {
    if (typeof document !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      // Skip links
      this.toggleSkipLinks(features.skipLinks);

      // Landmarks
      this.toggleLandmarks(features.landmarks);

      // Headings
      this.toggleHeadings(features.headings);

      // Alt text
      this.toggleAltText(features.altText);

      // ARIA labels
      this.toggleAriaLabels(features.ariaLabels);

      // Focus management
      this.toggleFocusManagement(features.focusManagement);

      // Color contrast
      this.toggleColorContrast(features.colorContrast);

      // Text scaling
      this.toggleTextScaling(features.textScaling);

      // Screen reader support
      this.toggleScreenReaderSupport(features.screenReaderSupport);

      // Keyboard support
      this.toggleKeyboardSupport(features.keyboardSupport);
    }
  }

  // Feature Toggles
  private toggleSkipLinks(enabled: boolean): void {
    const skipLinks &#x3D; document.querySelectorAll(&#x27;[data-skip-link]&#x27;);
    skipLinks.forEach(link &#x3D;&gt; {
      (link as HTMLElement).style.display &#x3D; enabled ? &#x27;block&#x27; : &#x27;none&#x27;;
    });
  }

  private toggleLandmarks(enabled: boolean): void {
    const landmarks &#x3D; document.querySelectorAll(&#x27;[role&#x3D;&quot;banner&quot;], [role&#x3D;&quot;navigation&quot;], [role&#x3D;&quot;main&quot;], [role&#x3D;&quot;complementary&quot;], [role&#x3D;&quot;contentinfo&quot;]&#x27;);
    landmarks.forEach(landmark &#x3D;&gt; {
      (landmark as HTMLElement).setAttribute(&#x27;aria-hidden&#x27;, (!enabled).toString());
    });
  }

  private toggleHeadings(enabled: boolean): void {
    const headings &#x3D; document.querySelectorAll(&#x27;h1, h2, h3, h4, h5, h6&#x27;);
    headings.forEach(heading &#x3D;&gt; {
      (heading as HTMLElement).setAttribute(&#x27;aria-hidden&#x27;, (!enabled).toString());
    });
  }

  private toggleAltText(enabled: boolean): void {
    const images &#x3D; document.querySelectorAll(&#x27;img&#x27;);
    images.forEach(img &#x3D;&gt; {
      if (enabled &amp;&amp; !img.getAttribute(&#x27;alt&#x27;)) {
        img.setAttribute(&#x27;alt&#x27;, &#x27;Image&#x27;);
      } else if (!enabled) {
        img.removeAttribute(&#x27;alt&#x27;);
      }
    });
  }

  private toggleAriaLabels(enabled: boolean): void {
    const elements &#x3D; document.querySelectorAll(&#x27;button, input, select, textarea, a&#x27;);
    elements.forEach(element &#x3D;&gt; {
      if (enabled &amp;&amp; !element.getAttribute(&#x27;aria-label&#x27;)) {
        const text &#x3D; element.textContent || element.getAttribute(&#x27;placeholder&#x27;) || &#x27;Interactive element&#x27;;
        element.setAttribute(&#x27;aria-label&#x27;, text);
      } else if (!enabled) {
        element.removeAttribute(&#x27;aria-label&#x27;);
      }
    });
  }

  private toggleFocusManagement(enabled: boolean): void {
    const focusableElements &#x3D; this.getFocusableElements();
    focusableElements.forEach(element &#x3D;&gt; {
      element.setAttribute(&#x27;tabindex&#x27;, enabled ? &#x27;0&#x27; : &#x27;-1&#x27;);
    });
  }

  private toggleColorContrast(enabled: boolean): void {
    const body &#x3D; document.body;
    body.classList.toggle(&#x27;high-contrast&#x27;, enabled);
  }

  private toggleTextScaling(enabled: boolean): void {
    const body &#x3D; document.body;
    body.classList.toggle(&#x27;text-scaling&#x27;, enabled);
  }

  private toggleScreenReaderSupport(enabled: boolean): void {
    const body &#x3D; document.body;
    body.classList.toggle(&#x27;screen-reader-support&#x27;, enabled);
  }

  private toggleKeyboardSupport(enabled: boolean): void {
    const body &#x3D; document.body;
    body.classList.toggle(&#x27;keyboard-support&#x27;, enabled);
  }

  // Utility Methods
  private getFocusableElements(): HTMLElement[] {
    const focusableSelectors &#x3D; [
      &#x27;button:not([disabled])&#x27;,
      &#x27;input:not([disabled])&#x27;,
      &#x27;select:not([disabled])&#x27;,
      &#x27;textarea:not([disabled])&#x27;,
      &#x27;a[href]&#x27;,
      &#x27;[tabindex]:not([tabindex&#x3D;&quot;-1&quot;])&#x27;,
      &#x27;[role&#x3D;&quot;button&quot;]&#x27;,
      &#x27;[role&#x3D;&quot;link&quot;]&#x27;,
      &#x27;[role&#x3D;&quot;menuitem&quot;]&#x27;,
      &#x27;[role&#x3D;&quot;option&quot;]&#x27;,
      &#x27;[role&#x3D;&quot;gridcell&quot;]&#x27;
    ];

    return Array.from(document.querySelectorAll(focusableSelectors.join(&#x27;, &#x27;))) as HTMLElement[];
  }

  // Initialization
  private initializeAccessibility(): void {
    this.loadSettings();
    this.detectSystemPreferences();
    this.setupAccessibilityFeatures();
  }

  private loadSettings(): void {
    if (typeof localStorage !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      const saved &#x3D; localStorage.getItem(&#x27;accessibility-settings&#x27;);
      if (saved) {
        try {
          const settings &#x3D; JSON.parse(saved);
          this._settings.set(settings);
          this.applySettings(settings);
        } catch (e) {
          console.warn(&#x27;Failed to load accessibility settings:&#x27;, e);
        }
      }
    }
  }

  private saveSettings(settings: AccessibilitySettings): void {
    if (typeof localStorage !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      localStorage.setItem(&#x27;accessibility-settings&#x27;, JSON.stringify(settings));
    }
  }

  private detectSystemPreferences(): void {
    if (typeof window !&#x3D;&#x3D; &#x27;undefined&#x27; &amp;&amp; &#x27;matchMedia&#x27; in window) {
      // Detect reduced motion preference
      const reducedMotion &#x3D; window.matchMedia(&#x27;(prefers-reduced-motion: reduce)&#x27;).matches;
      this.updateSettings({ reducedMotion });

      // Detect color scheme preference
      const prefersDark &#x3D; window.matchMedia(&#x27;(prefers-color-scheme: dark)&#x27;).matches;
      const prefersLight &#x3D; window.matchMedia(&#x27;(prefers-color-scheme: light)&#x27;).matches;

      if (prefersDark) {
        this.updateSettings({ colorScheme: &#x27;dark&#x27; });
      } else if (prefersLight) {
        this.updateSettings({ colorScheme: &#x27;light&#x27; });
      }

      // Detect high contrast preference
      const highContrast &#x3D; window.matchMedia(&#x27;(prefers-contrast: high)&#x27;).matches;
      this.updateSettings({ highContrast });
    }
  }

  private setupAccessibilityFeatures(): void {
    // Add skip links
    this.addSkipLinks();

    // Add landmarks
    this.addLandmarks();

    // Add ARIA attributes
    this.addAriaAttributes();

    // Add focus management
    this.addFocusManagement();
  }

  private addSkipLinks(): void {
    if (typeof document !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      const skipLink &#x3D; document.createElement(&#x27;a&#x27;);
      skipLink.href &#x3D; &#x27;#main-content&#x27;;
      skipLink.textContent &#x3D; &#x27;Skip to main content&#x27;;
      skipLink.className &#x3D; &#x27;skip-link&#x27;;
      skipLink.setAttribute(&#x27;data-skip-link&#x27;, &#x27;true&#x27;);
      document.body.insertBefore(skipLink, document.body.firstChild);
    }
  }

  private addLandmarks(): void {
    if (typeof document !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      // Add main landmark
      const main &#x3D; document.querySelector(&#x27;main&#x27;);
      if (main) {
        main.setAttribute(&#x27;role&#x27;, &#x27;main&#x27;);
        main.id &#x3D; &#x27;main-content&#x27;;
      }

      // Add navigation landmarks
      const navs &#x3D; document.querySelectorAll(&#x27;nav&#x27;);
      navs.forEach(nav &#x3D;&gt; nav.setAttribute(&#x27;role&#x27;, &#x27;navigation&#x27;));

      // Add banner landmark
      const header &#x3D; document.querySelector(&#x27;header&#x27;);
      if (header) {
        header.setAttribute(&#x27;role&#x27;, &#x27;banner&#x27;);
      }

      // Add contentinfo landmark
      const footer &#x3D; document.querySelector(&#x27;footer&#x27;);
      if (footer) {
        footer.setAttribute(&#x27;role&#x27;, &#x27;contentinfo&#x27;);
      }
    }
  }

  private addAriaAttributes(): void {
    if (typeof document !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      // Add ARIA labels to buttons without text
      const buttons &#x3D; document.querySelectorAll(&#x27;button:not([aria-label])&#x27;);
      buttons.forEach(button &#x3D;&gt; {
        if (!button.textContent?.trim()) {
          button.setAttribute(&#x27;aria-label&#x27;, &#x27;Button&#x27;);
        }
      });

      // Add ARIA labels to images
      const images &#x3D; document.querySelectorAll(&#x27;img:not([alt])&#x27;);
      images.forEach(img &#x3D;&gt; {
        img.setAttribute(&#x27;alt&#x27;, &#x27;Image&#x27;);
      });

      // Add ARIA labels to form inputs
      const inputs &#x3D; document.querySelectorAll(&#x27;input:not([aria-label]):not([aria-labelledby])&#x27;);
      inputs.forEach(input &#x3D;&gt; {
        const label &#x3D; document.querySelector(&#x60;label[for&#x3D;&quot;${input.id}&quot;]&#x60;);
        if (label) {
          input.setAttribute(&#x27;aria-labelledby&#x27;, label.id || &#x27;label-&#x27; + input.id);
        }
      });
    }
  }

  private addFocusManagement(): void {
    if (typeof document !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      // Add focus trap to modals
      const modals &#x3D; document.querySelectorAll(&#x27;[data-modal]&#x27;);
      modals.forEach(modal &#x3D;&gt; {
        modal.setAttribute(&#x27;role&#x27;, &#x27;dialog&#x27;);
        modal.setAttribute(&#x27;aria-modal&#x27;, &#x27;true&#x27;);
      });

      // Add focus management to dropdowns
      const dropdowns &#x3D; document.querySelectorAll(&#x27;[data-dropdown]&#x27;);
      dropdowns.forEach(dropdown &#x3D;&gt; {
        dropdown.setAttribute(&#x27;role&#x27;, &#x27;listbox&#x27;);
      });
    }
  }

  // Public API Methods
  announceToScreenReader(message: string): void {
    if (typeof document !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      const announcement &#x3D; document.createElement(&#x27;div&#x27;);
      announcement.setAttribute(&#x27;aria-live&#x27;, &#x27;polite&#x27;);
      announcement.setAttribute(&#x27;aria-atomic&#x27;, &#x27;true&#x27;);
      announcement.className &#x3D; &#x27;sr-only&#x27;;
      announcement.textContent &#x3D; message;

      document.body.appendChild(announcement);

      setTimeout(() &#x3D;&gt; {
        document.body.removeChild(announcement);
      }, 1000);
    }
  }

  toggleHighContrast(): void {
    const current &#x3D; this._settings();
    this.updateSettings({ highContrast: !current.highContrast });
  }

  toggleLargeText(): void {
    const current &#x3D; this._settings();
    this.updateSettings({ largeText: !current.largeText });
  }

  toggleReducedMotion(): void {
    const current &#x3D; this._settings();
    this.updateSettings({ reducedMotion: !current.reducedMotion });
  }

  setFontSize(size: &#x27;small&#x27; | &#x27;medium&#x27; | &#x27;large&#x27; | &#x27;extra-large&#x27;): void {
    this.updateSettings({ fontSize: size });
  }

  setColorScheme(scheme: &#x27;light&#x27; | &#x27;dark&#x27; | &#x27;auto&#x27;): void {
    this.updateSettings({ colorScheme: scheme });
  }

  // Reset to defaults
  resetToDefaults(): void {
    const defaults: AccessibilitySettings &#x3D; {
      highContrast: false,
      largeText: false,
      reducedMotion: false,
      screenReader: false,
      keyboardNavigation: true,
      focusVisible: true,
      colorBlindSupport: false,
      fontSize: &#x27;medium&#x27;,
      colorScheme: &#x27;auto&#x27;,
      animationSpeed: &#x27;normal&#x27;,
      focusIndicator: &#x27;default&#x27;,
      readingMode: false,
      voiceOver: false,
      magnifier: false,
      keyboardShortcuts: true
    };

    this.updateSettings(defaults);
  }
}

</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'AccessibilityFeatures.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
