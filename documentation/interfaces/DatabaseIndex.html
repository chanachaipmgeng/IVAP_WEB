<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">frontend documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">

















<ol class="breadcrumb">
  <li class="breadcrumb-item">Interfaces</li>
  <li class="breadcrumb-item"
  >
  DatabaseIndex</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/testing/services/database-optimization.service.ts</code>
        </p>




        <section data-compodoc="block-index">
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#columns" 
>
                                            columns
                                        </a>
                                </li>
                                <li>
                                        <a href="#createdAt" 
>
                                            createdAt
                                        </a>
                                </li>
                                <li>
                                        <a href="#id" 
>
                                            id
                                        </a>
                                </li>
                                <li>
                                        <a href="#isActive" 
>
                                            isActive
                                        </a>
                                </li>
                                <li>
                                        <a href="#isUnique" 
>
                                            isUnique
                                        </a>
                                </li>
                                <li>
                                        <a href="#lastAnalyzed" 
>
                                            lastAnalyzed
                                        </a>
                                </li>
                                <li>
                                        <a href="#name" 
>
                                            name
                                        </a>
                                </li>
                                <li>
                                        <a href="#performance" 
>
                                            performance
                                        </a>
                                </li>
                                <li>
                                        <a href="#recommendations" 
>
                                            recommendations
                                        </a>
                                </li>
                                <li>
                                        <a href="#size" 
>
                                            size
                                        </a>
                                </li>
                                <li>
                                        <a href="#table" 
>
                                            table
                                        </a>
                                </li>
                                <li>
                                        <a href="#type" 
>
                                            type
                                        </a>
                                </li>
                                <li>
                                        <a href="#usage" 
>
                                            usage
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section data-compodoc="block-properties">
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="columns"></a>
                                        <span class="name "><b>columns</b>
                                            <a href="#columns">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>columns:     <code>string[]</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>string[]</code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="createdAt"></a>
                                        <span class="name "><b>createdAt</b>
                                            <a href="#createdAt">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>createdAt:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="id"></a>
                                        <span class="name "><b>id</b>
                                            <a href="#id">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>id:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="isActive"></a>
                                        <span class="name "><b>isActive</b>
                                            <a href="#isActive">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>isActive:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="isUnique"></a>
                                        <span class="name "><b>isUnique</b>
                                            <a href="#isUnique">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>isUnique:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="lastAnalyzed"></a>
                                        <span class="name "><b>lastAnalyzed</b>
                                            <a href="#lastAnalyzed">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>lastAnalyzed:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="name"></a>
                                        <span class="name "><b>name</b>
                                            <a href="#name">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>name:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="performance"></a>
                                        <span class="name "><b>performance</b>
                                            <a href="#performance">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>performance:     <code>literal type</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>literal type</code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="recommendations"></a>
                                        <span class="name "><b>recommendations</b>
                                            <a href="#recommendations">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>recommendations:     <code>string[]</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>string[]</code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="size"></a>
                                        <span class="name "><b>size</b>
                                            <a href="#size">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>size:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="table"></a>
                                        <span class="name "><b>table</b>
                                            <a href="#table">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>table:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="type"></a>
                                        <span class="name "><b>type</b>
                                            <a href="#type">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>type:     <code>&quot;primary&quot; | &quot;unique&quot; | &quot;index&quot; | &quot;fulltext&quot; | &quot;spatial&quot;</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>&quot;primary&quot; | &quot;unique&quot; | &quot;index&quot; | &quot;fulltext&quot; | &quot;spatial&quot;</code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="usage"></a>
                                        <span class="name "><b>usage</b>
                                            <a href="#usage">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>usage:     <code>literal type</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>literal type</code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, signal, computed } from &#x27;@angular/core&#x27;;
import { Observable } from &#x27;rxjs&#x27;;

export interface DatabaseIndex {
  id: string;
  name: string;
  table: string;
  columns: string[];
  type: &#x27;primary&#x27; | &#x27;unique&#x27; | &#x27;index&#x27; | &#x27;fulltext&#x27; | &#x27;spatial&#x27;;
  isUnique: boolean;
  isActive: boolean;
  size: number; // in MB
  usage: {
    reads: number;
    writes: number;
    lastUsed: Date;
    efficiency: number; // percentage
  };
  performance: {
    queryTime: number; // in ms
    scanCount: number;
    logicalReads: number;
    physicalReads: number;
  };
  createdAt: Date;
  lastAnalyzed: Date;
  recommendations: string[];
}

export interface QueryPerformance {
  id: string;
  query: string;
  table: string;
  executionTime: number; // in ms
  rowsExamined: number;
  rowsReturned: number;
  indexUsed?: string;
  isOptimized: boolean;
  frequency: number; // executions per hour
  lastExecuted: Date;
  recommendations: string[];
  cost: number; // relative cost
}

export interface TableStatistics {
  id: string;
  name: string;
  rows: number;
  size: number; // in MB
  indexSize: number; // in MB
  dataSize: number; // in MB
  fragmentation: number; // percentage
  lastAnalyzed: Date;
  growthRate: number; // rows per day
  accessPattern: {
    reads: number;
    writes: number;
    updates: number;
    deletes: number;
  };
  indexes: DatabaseIndex[];
  performance: {
    averageQueryTime: number;
    slowQueries: number;
    missingIndexes: number;
  };
}

export interface OptimizationTask {
  id: string;
  name: string;
  type: &#x27;index_creation&#x27; | &#x27;index_dropping&#x27; | &#x27;table_optimization&#x27; | &#x27;query_optimization&#x27; | &#x27;maintenance&#x27;;
  status: &#x27;pending&#x27; | &#x27;running&#x27; | &#x27;completed&#x27; | &#x27;failed&#x27; | &#x27;cancelled&#x27;;
  priority: &#x27;low&#x27; | &#x27;medium&#x27; | &#x27;high&#x27; | &#x27;critical&#x27;;
  description: string;
  affectedTables: string[];
  estimatedDuration: number; // in minutes
  actualDuration?: number; // in minutes
  startTime?: Date;
  endTime?: Date;
  progress: number; // 0-100
  results?: {
    performanceGain: number; // percentage
    spaceSaved: number; // in MB
    queriesImproved: number;
    errors?: string[];
  };
  createdBy: string;
  createdAt: Date;
}

export interface DatabaseMetrics {
  totalTables: number;
  totalIndexes: number;
  totalSize: number; // in MB
  averageFragmentation: number;
  slowQueries: number;
  missingIndexes: number;
  optimizationTasks: number;
  completedTasks: number;
  performanceScore: number; // 0-100
  spaceUtilization: number; // percentage
  queryEfficiency: number; // percentage
  indexEfficiency: number; // percentage
  lastOptimization: Date;
  nextScheduledOptimization: Date;
}

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class DatabaseOptimizationService {
  // ✅ Private writable signals
  private _indexes &#x3D; signal&lt;DatabaseIndex[]&gt;([]);
  private _queries &#x3D; signal&lt;QueryPerformance[]&gt;([]);
  private _tables &#x3D; signal&lt;TableStatistics[]&gt;([]);
  private _tasks &#x3D; signal&lt;OptimizationTask[]&gt;([]);
  private _metrics &#x3D; signal&lt;DatabaseMetrics&gt;(this.getDefaultMetrics());

  // ✅ Public readonly signals
  public readonly indexes &#x3D; this._indexes.asReadonly();
  public readonly queries &#x3D; this._queries.asReadonly();
  public readonly tables &#x3D; this._tables.asReadonly();
  public readonly tasks &#x3D; this._tasks.asReadonly();
  public readonly metrics &#x3D; this._metrics.asReadonly();

  // ✅ Computed signals for derived state
  public readonly indexesCount &#x3D; computed(() &#x3D;&gt; this._indexes().length);
  public readonly activeIndexesCount &#x3D; computed(() &#x3D;&gt;
    this._indexes().filter((i: DatabaseIndex) &#x3D;&gt; i.isActive).length
  );
  public readonly queriesCount &#x3D; computed(() &#x3D;&gt; this._queries().length);
  public readonly slowQueriesCount &#x3D; computed(() &#x3D;&gt;
    this._queries().filter((q: QueryPerformance) &#x3D;&gt; !q.isOptimized).length
  );
  public readonly tablesCount &#x3D; computed(() &#x3D;&gt; this._tables().length);
  public readonly tasksCount &#x3D; computed(() &#x3D;&gt; this._tasks().length);
  public readonly runningTasksCount &#x3D; computed(() &#x3D;&gt;
    this._tasks().filter((t: OptimizationTask) &#x3D;&gt; t.status &#x3D;&#x3D;&#x3D; &#x27;running&#x27;).length
  );
  public readonly completedTasksCount &#x3D; computed(() &#x3D;&gt;
    this._tasks().filter((t: OptimizationTask) &#x3D;&gt; t.status &#x3D;&#x3D;&#x3D; &#x27;completed&#x27;).length
  );

  // ✅ Observable compatibility layer (for backward compatibility)
  public indexes$ &#x3D; new Observable&lt;DatabaseIndex[]&gt;(observer &#x3D;&gt; {
    observer.next(this._indexes());
  });
  public queries$ &#x3D; new Observable&lt;QueryPerformance[]&gt;(observer &#x3D;&gt; {
    observer.next(this._queries());
  });
  public tables$ &#x3D; new Observable&lt;TableStatistics[]&gt;(observer &#x3D;&gt; {
    observer.next(this._tables());
  });
  public tasks$ &#x3D; new Observable&lt;OptimizationTask[]&gt;(observer &#x3D;&gt; {
    observer.next(this._tasks());
  });
  public metrics$ &#x3D; new Observable&lt;DatabaseMetrics&gt;(observer &#x3D;&gt; {
    observer.next(this._metrics());
  });

  constructor() {
    this.initializeDemoData();
  }

  /**
   * Get all indexes
   */
  getIndexes(): DatabaseIndex[] {
    return this._indexes();
  }

  /**
   * Get indexes by table
   */
  getIndexesByTable(tableName: string): DatabaseIndex[] {
    return this._indexes().filter((i: DatabaseIndex) &#x3D;&gt; i.table &#x3D;&#x3D;&#x3D; tableName);
  }

  /**
   * Create index
   */
  createIndex(index: Omit&lt;DatabaseIndex, &#x27;id&#x27; | &#x27;createdAt&#x27; | &#x27;lastAnalyzed&#x27; | &#x27;usage&#x27; | &#x27;performance&#x27; | &#x27;recommendations&#x27;&gt;): DatabaseIndex {
    const newIndex: DatabaseIndex &#x3D; {
      ...index,
      id: this.generateId(),
      createdAt: new Date(),
      lastAnalyzed: new Date(),
      usage: {
        reads: 0,
        writes: 0,
        lastUsed: new Date(),
        efficiency: 0
      },
      performance: {
        queryTime: 0,
        scanCount: 0,
        logicalReads: 0,
        physicalReads: 0
      },
      recommendations: []
    };

    const indexes &#x3D; this._indexes();
    this._indexes.set([...indexes, newIndex]);

    // Create optimization task
    this.createOptimizationTask({
      name: &#x60;Create index ${newIndex.name}&#x60;,
      type: &#x27;index_creation&#x27;,
      priority: &#x27;medium&#x27;,
      description: &#x60;Creating index ${newIndex.name} on table ${newIndex.table}&#x60;,
      affectedTables: [newIndex.table],
      estimatedDuration: 5,
      createdBy: &#x27;system&#x27;
    });

    this.updateMetrics();
    return newIndex;
  }

  /**
   * Drop index
   */
  dropIndex(indexId: string): boolean {
    const indexes &#x3D; this._indexes();
    const index &#x3D; indexes.find(i &#x3D;&gt; i.id &#x3D;&#x3D;&#x3D; indexId);

    if (!index) return false;

    // Create optimization task
    this.createOptimizationTask({
      name: &#x60;Drop index ${index.name}&#x60;,
      type: &#x27;index_dropping&#x27;,
      priority: &#x27;low&#x27;,
      description: &#x60;Dropping index ${index.name} from table ${index.table}&#x60;,
      affectedTables: [index.table],
      estimatedDuration: 2,
      createdBy: &#x27;system&#x27;
    });

    this._indexes.set(indexes.filter((i: DatabaseIndex) &#x3D;&gt; i.id !&#x3D;&#x3D; indexId));
    this.updateMetrics();
    return true;
  }

  /**
   * Analyze index performance
   */
  analyzeIndex(indexId: string): DatabaseIndex | null {
    const indexes &#x3D; this._indexes();
    const index &#x3D; indexes.find(i &#x3D;&gt; i.id &#x3D;&#x3D;&#x3D; indexId);

    if (!index) return null;

    // Simulate analysis
    index.usage.efficiency &#x3D; Math.random() * 100;
    index.usage.reads &#x3D; Math.floor(Math.random() * 1000);
    index.usage.writes &#x3D; Math.floor(Math.random() * 100);
    index.usage.lastUsed &#x3D; new Date();

    index.performance.queryTime &#x3D; Math.random() * 100;
    index.performance.scanCount &#x3D; Math.floor(Math.random() * 100);
    index.performance.logicalReads &#x3D; Math.floor(Math.random() * 1000);
    index.performance.physicalReads &#x3D; Math.floor(Math.random() * 100);

    index.lastAnalyzed &#x3D; new Date();

    // Generate recommendations
    index.recommendations &#x3D; this.generateIndexRecommendations(index);

    this._indexes.set([...indexes]);
    this.updateMetrics();
    return index;
  }

  /**
   * Get query performance data
   */
  getQueryPerformance(): QueryPerformance[] {
    return this._queries();
  }

  /**
   * Get slow queries
   */
  getSlowQueries(threshold: number &#x3D; 1000): QueryPerformance[] {
    return this._queries().filter((q: QueryPerformance) &#x3D;&gt; q.executionTime &gt; threshold);
  }

  /**
   * Optimize query
   */
  optimizeQuery(queryId: string): QueryPerformance | null {
    const queries &#x3D; this._queries();
    const query &#x3D; queries.find(q &#x3D;&gt; q.id &#x3D;&#x3D;&#x3D; queryId);

    if (!query) return null;

    // Simulate optimization
    query.executionTime *&#x3D; 0.5; // 50% improvement
    query.isOptimized &#x3D; true;
    query.recommendations &#x3D; this.generateQueryRecommendations(query);

    this._queries.set([...queries]);
    this.updateMetrics();
    return query;
  }

  /**
   * Get table statistics
   */
  getTableStatistics(): TableStatistics[] {
    return this._tables();
  }

  /**
   * Get table by name
   */
  getTable(tableName: string): TableStatistics | undefined {
    return this._tables().find((t: TableStatistics) &#x3D;&gt; t.name &#x3D;&#x3D;&#x3D; tableName);
  }

  /**
   * Optimize table
   */
  optimizeTable(tableName: string): boolean {
    const tables &#x3D; this._tables();
    const table &#x3D; tables.find(t &#x3D;&gt; t.name &#x3D;&#x3D;&#x3D; tableName);

    if (!table) return false;

    // Create optimization task
    this.createOptimizationTask({
      name: &#x60;Optimize table ${tableName}&#x60;,
      type: &#x27;table_optimization&#x27;,
      priority: &#x27;high&#x27;,
      description: &#x60;Optimizing table ${tableName}&#x60;,
      affectedTables: [tableName],
      estimatedDuration: 10,
      createdBy: &#x27;system&#x27;
    });

    // Simulate optimization
    table.fragmentation *&#x3D; 0.3; // Reduce fragmentation by 70%
    table.lastAnalyzed &#x3D; new Date();

    this._tables.set([...tables]);
    this.updateMetrics();
    return true;
  }

  /**
   * Get optimization tasks
   */
  getOptimizationTasks(): OptimizationTask[] {
    return this._tasks();
  }

  /**
   * Create optimization task
   */
  createOptimizationTask(task: Omit&lt;OptimizationTask, &#x27;id&#x27; | &#x27;createdAt&#x27; | &#x27;status&#x27; | &#x27;progress&#x27;&gt;): OptimizationTask {
    const newTask: OptimizationTask &#x3D; {
      ...task,
      id: this.generateId(),
      createdAt: new Date(),
      status: &#x27;pending&#x27;,
      progress: 0
    };

    const tasks &#x3D; this._tasks();
    this._tasks.set([...tasks, newTask]);

    // Simulate task execution
    this.executeTask(newTask.id);

    return newTask;
  }

  /**
   * Execute optimization task
   */
  private executeTask(taskId: string): void {
    const tasks &#x3D; this._tasks();
    const task &#x3D; tasks.find(t &#x3D;&gt; t.id &#x3D;&#x3D;&#x3D; taskId);

    if (!task) return;

    task.status &#x3D; &#x27;running&#x27;;
    task.startTime &#x3D; new Date();
    this._tasks.set([...tasks]);

    // Simulate task execution
    const interval &#x3D; setInterval(() &#x3D;&gt; {
      task.progress +&#x3D; Math.random() * 20;

      if (task.progress &gt;&#x3D; 100) {
        task.progress &#x3D; 100;
        task.status &#x3D; &#x27;completed&#x27;;
        task.endTime &#x3D; new Date();
        task.actualDuration &#x3D; Math.floor((task.endTime.getTime() - task.startTime!.getTime()) / (1000 * 60));

        // Generate results
        task.results &#x3D; {
          performanceGain: Math.random() * 50 + 10,
          spaceSaved: Math.random() * 100,
          queriesImproved: Math.floor(Math.random() * 20)
        };

        clearInterval(interval);
      }

      this._tasks.set([...tasks]);
      this.updateMetrics();
    }, 1000);
  }

  /**
   * Get database metrics
   */
  getMetrics(): DatabaseMetrics {
    return this._metrics();
  }

  /**
   * Generate optimization report
   */
  generateOptimizationReport(): any {
    const indexes &#x3D; this._indexes();
    const queries &#x3D; this._queries();
    const tables &#x3D; this._tables();
    const tasks &#x3D; this._tasks();

    const report &#x3D; {
      summary: {
        totalTables: tables.length,
        totalIndexes: indexes.length,
        totalQueries: queries.length,
        slowQueries: queries.filter(q &#x3D;&gt; q.executionTime &gt; 1000).length,
        missingIndexes: this.calculateMissingIndexes(queries, indexes),
        averageFragmentation: tables.reduce((sum, t) &#x3D;&gt; sum + t.fragmentation, 0) / tables.length,
        performanceScore: this.calculatePerformanceScore(indexes, queries, tables)
      },
      recommendations: this.generateOptimizationRecommendations(indexes, queries, tables),
      tasks: tasks.filter(t &#x3D;&gt; t.status &#x3D;&#x3D;&#x3D; &#x27;completed&#x27;).slice(-10),
      generatedAt: new Date()
    };

    return report;
  }

  /**
   * Generate index recommendations
   */
  private generateIndexRecommendations(index: DatabaseIndex): string[] {
    const recommendations: string[] &#x3D; [];

    if (index.usage.efficiency &lt; 50) {
      recommendations.push(&#x27;Consider dropping this index as it has low usage efficiency&#x27;);
    }
    if (index.performance.queryTime &gt; 100) {
      recommendations.push(&#x27;Index query time is high, consider optimizing the query&#x27;);
    }
    if (index.performance.scanCount &gt; 50) {
      recommendations.push(&#x27;High scan count detected, consider adding covering columns&#x27;);
    }
    if (index.size &gt; 1000) {
      recommendations.push(&#x27;Index size is large, consider partitioning or archiving old data&#x27;);
    }

    return recommendations;
  }

  /**
   * Generate query recommendations
   */
  private generateQueryRecommendations(query: QueryPerformance): string[] {
    const recommendations: string[] &#x3D; [];

    if (query.executionTime &gt; 1000) {
      recommendations.push(&#x27;Query execution time is high, consider adding indexes&#x27;);
    }
    if (query.rowsExamined &gt; query.rowsReturned * 10) {
      recommendations.push(&#x27;Query examines too many rows, consider adding WHERE clauses&#x27;);
    }
    if (!query.indexUsed) {
      recommendations.push(&#x27;No index used, consider adding appropriate indexes&#x27;);
    }
    if (query.frequency &gt; 100) {
      recommendations.push(&#x27;High frequency query, consider caching results&#x27;);
    }

    return recommendations;
  }

  /**
   * Calculate missing indexes
   */
  private calculateMissingIndexes(queries: QueryPerformance[], indexes: DatabaseIndex[]): number {
    return queries.filter(q &#x3D;&gt; !q.indexUsed &amp;&amp; q.executionTime &gt; 500).length;
  }

  /**
   * Calculate performance score
   */
  private calculatePerformanceScore(indexes: DatabaseIndex[], queries: QueryPerformance[], tables: TableStatistics[]): number {
    const indexEfficiency &#x3D; indexes.reduce((sum, i) &#x3D;&gt; sum + i.usage.efficiency, 0) / Math.max(indexes.length, 1);
    const queryEfficiency &#x3D; queries.filter(q &#x3D;&gt; q.executionTime &lt; 1000).length / Math.max(queries.length, 1) * 100;
    const fragmentationScore &#x3D; 100 - (tables.reduce((sum, t) &#x3D;&gt; sum + t.fragmentation, 0) / Math.max(tables.length, 1));

    return (indexEfficiency + queryEfficiency + fragmentationScore) / 3;
  }

  /**
   * Generate optimization recommendations
   */
  private generateOptimizationRecommendations(indexes: DatabaseIndex[], queries: QueryPerformance[], tables: TableStatistics[]): string[] {
    const recommendations: string[] &#x3D; [];

    const slowQueries &#x3D; queries.filter(q &#x3D;&gt; q.executionTime &gt; 1000);
    if (slowQueries.length &gt; 0) {
      recommendations.push(&#x60;Optimize ${slowQueries.length} slow queries&#x60;);
    }

    const fragmentedTables &#x3D; tables.filter(t &#x3D;&gt; t.fragmentation &gt; 30);
    if (fragmentedTables.length &gt; 0) {
      recommendations.push(&#x60;Optimize ${fragmentedTables.length} fragmented tables&#x60;);
    }

    const unusedIndexes &#x3D; indexes.filter(i &#x3D;&gt; i.usage.efficiency &lt; 20);
    if (unusedIndexes.length &gt; 0) {
      recommendations.push(&#x60;Consider dropping ${unusedIndexes.length} unused indexes&#x60;);
    }

    const missingIndexes &#x3D; this.calculateMissingIndexes(queries, indexes);
    if (missingIndexes &gt; 0) {
      recommendations.push(&#x60;Add ${missingIndexes} missing indexes&#x60;);
    }

    return recommendations;
  }

  /**
   * Update metrics
   */
  private updateMetrics(): void {
    const indexes &#x3D; this._indexes();
    const queries &#x3D; this._queries();
    const tables &#x3D; this._tables();
    const tasks &#x3D; this._tasks();
    const metrics &#x3D; this.calculateMetrics(indexes, queries, tables, tasks);
    this._metrics.set(metrics);
  }

  /**
   * Calculate metrics
   */
  private calculateMetrics(indexes: DatabaseIndex[], queries: QueryPerformance[], tables: TableStatistics[], tasks: OptimizationTask[]): DatabaseMetrics {
    const totalTables &#x3D; tables.length;
    const totalIndexes &#x3D; indexes.length;
    const totalSize &#x3D; tables.reduce((sum, t) &#x3D;&gt; sum + t.size, 0);
    const averageFragmentation &#x3D; tables.reduce((sum, t) &#x3D;&gt; sum + t.fragmentation, 0) / Math.max(tables.length, 1);
    const slowQueries &#x3D; queries.filter(q &#x3D;&gt; q.executionTime &gt; 1000).length;
    const missingIndexes &#x3D; this.calculateMissingIndexes(queries, indexes);
    const optimizationTasks &#x3D; tasks.length;
    const completedTasks &#x3D; tasks.filter(t &#x3D;&gt; t.status &#x3D;&#x3D;&#x3D; &#x27;completed&#x27;).length;
    const performanceScore &#x3D; this.calculatePerformanceScore(indexes, queries, tables);
    const spaceUtilization &#x3D; totalSize &gt; 0 ? (tables.reduce((sum, t) &#x3D;&gt; sum + t.dataSize, 0) / totalSize) * 100 : 0;
    const queryEfficiency &#x3D; queries.length &gt; 0 ? (queries.filter(q &#x3D;&gt; q.executionTime &lt; 1000).length / queries.length) * 100 : 100;
    const indexEfficiency &#x3D; indexes.length &gt; 0 ? indexes.reduce((sum, i) &#x3D;&gt; sum + i.usage.efficiency, 0) / indexes.length : 100;
    const lastOptimization &#x3D; tasks.filter(t &#x3D;&gt; t.status &#x3D;&#x3D;&#x3D; &#x27;completed&#x27;).sort((a, b) &#x3D;&gt; b.endTime!.getTime() - a.endTime!.getTime())[0]?.endTime || new Date();
    const nextScheduledOptimization &#x3D; new Date(Date.now() + 24 * 60 * 60 * 1000); // Next day

    return {
      totalTables,
      totalIndexes,
      totalSize,
      averageFragmentation,
      slowQueries,
      missingIndexes,
      optimizationTasks,
      completedTasks,
      performanceScore,
      spaceUtilization,
      queryEfficiency,
      indexEfficiency,
      lastOptimization,
      nextScheduledOptimization
    };
  }

  /**
   * Get default metrics
   */
  private getDefaultMetrics(): DatabaseMetrics {
    return {
      totalTables: 0,
      totalIndexes: 0,
      totalSize: 0,
      averageFragmentation: 0,
      slowQueries: 0,
      missingIndexes: 0,
      optimizationTasks: 0,
      completedTasks: 0,
      performanceScore: 0,
      spaceUtilization: 0,
      queryEfficiency: 0,
      indexEfficiency: 0,
      lastOptimization: new Date(),
      nextScheduledOptimization: new Date()
    };
  }

  /**
   * Initialize demo data
   */
  private initializeDemoData(): void {
    // Create demo indexes
    const demoIndexes: DatabaseIndex[] &#x3D; [
      {
        id: &#x27;index-1&#x27;,
        name: &#x27;idx_users_email&#x27;,
        table: &#x27;users&#x27;,
        columns: [&#x27;email&#x27;],
        type: &#x27;unique&#x27;,
        isUnique: true,
        isActive: true,
        size: 2.5,
        usage: {
          reads: 1500,
          writes: 50,
          lastUsed: new Date(),
          efficiency: 95
        },
        performance: {
          queryTime: 15,
          scanCount: 1,
          logicalReads: 3,
          physicalReads: 0
        },
        createdAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),
        lastAnalyzed: new Date(),
        recommendations: []
      },
      {
        id: &#x27;index-2&#x27;,
        name: &#x27;idx_events_timestamp&#x27;,
        table: &#x27;events&#x27;,
        columns: [&#x27;timestamp&#x27;, &#x27;type&#x27;],
        type: &#x27;index&#x27;,
        isUnique: false,
        isActive: true,
        size: 15.8,
        usage: {
          reads: 800,
          writes: 200,
          lastUsed: new Date(),
          efficiency: 78
        },
        performance: {
          queryTime: 45,
          scanCount: 5,
          logicalReads: 25,
          physicalReads: 2
        },
        createdAt: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000),
        lastAnalyzed: new Date(),
        recommendations: []
      }
    ];

    this._indexes.set(demoIndexes);

    // Create demo queries
    const demoQueries: QueryPerformance[] &#x3D; [
      {
        id: &#x27;query-1&#x27;,
        query: &#x27;SELECT * FROM users WHERE email &#x3D; ?&#x27;,
        table: &#x27;users&#x27;,
        executionTime: 12,
        rowsExamined: 1,
        rowsReturned: 1,
        indexUsed: &#x27;idx_users_email&#x27;,
        isOptimized: true,
        frequency: 500,
        lastExecuted: new Date(),
        recommendations: [],
        cost: 1
      },
      {
        id: &#x27;query-2&#x27;,
        query: &#x27;SELECT * FROM events WHERE timestamp &gt; ? AND type &#x3D; ?&#x27;,
        table: &#x27;events&#x27;,
        executionTime: 1200,
        rowsExamined: 50000,
        rowsReturned: 100,
        indexUsed: &#x27;idx_events_timestamp&#x27;,
        isOptimized: false,
        frequency: 100,
        lastExecuted: new Date(),
        recommendations: [],
        cost: 5
      }
    ];

    this._queries.set(demoQueries);

    // Create demo tables
    const demoTables: TableStatistics[] &#x3D; [
      {
        id: &#x27;table-1&#x27;,
        name: &#x27;users&#x27;,
        rows: 10000,
        size: 25.5,
        indexSize: 5.2,
        dataSize: 20.3,
        fragmentation: 15,
        lastAnalyzed: new Date(),
        growthRate: 50,
        accessPattern: {
          reads: 5000,
          writes: 200,
          updates: 100,
          deletes: 10
        },
        indexes: demoIndexes.filter(i &#x3D;&gt; i.table &#x3D;&#x3D;&#x3D; &#x27;users&#x27;),
        performance: {
          averageQueryTime: 25,
          slowQueries: 2,
          missingIndexes: 0
        }
      },
      {
        id: &#x27;table-2&#x27;,
        name: &#x27;events&#x27;,
        rows: 1000000,
        size: 250.8,
        indexSize: 45.2,
        dataSize: 205.6,
        fragmentation: 35,
        lastAnalyzed: new Date(),
        growthRate: 1000,
        accessPattern: {
          reads: 20000,
          writes: 5000,
          updates: 1000,
          deletes: 100
        },
        indexes: demoIndexes.filter(i &#x3D;&gt; i.table &#x3D;&#x3D;&#x3D; &#x27;events&#x27;),
        performance: {
          averageQueryTime: 150,
          slowQueries: 15,
          missingIndexes: 3
        }
      }
    ];

    this._tables.set(demoTables);

    // Create demo tasks
    const demoTasks: OptimizationTask[] &#x3D; [
      {
        id: &#x27;task-1&#x27;,
        name: &#x27;Optimize events table&#x27;,
        type: &#x27;table_optimization&#x27;,
        status: &#x27;completed&#x27;,
        priority: &#x27;high&#x27;,
        description: &#x27;Optimize events table to reduce fragmentation&#x27;,
        affectedTables: [&#x27;events&#x27;],
        estimatedDuration: 15,
        actualDuration: 12,
        startTime: new Date(Date.now() - 2 * 60 * 60 * 1000),
        endTime: new Date(Date.now() - 2 * 60 * 60 * 1000 + 12 * 60 * 1000),
        progress: 100,
        results: {
          performanceGain: 25,
          spaceSaved: 15.5,
          queriesImproved: 8
        },
        createdBy: &#x27;admin&#x27;,
        createdAt: new Date(Date.now() - 3 * 60 * 60 * 1000)
      }
    ];

    this._tasks.set(demoTasks);
    this.updateMetrics();
  }

  /**
   * Generate unique ID
   */
  private generateId(): string {
    return &#x27;db-&#x27; + Date.now() + &#x27;-&#x27; + Math.random().toString(36).substr(2, 9);
  }
}
</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'DatabaseIndex.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
