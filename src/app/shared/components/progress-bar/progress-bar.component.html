<div class="progress-container w-full mb-4" [ngClass]="customClass || ''" role="group" [attr.aria-label]="ariaLabel || label || 'Progress bar'">
  <!-- Label -->
  @if (mergedConfig.showLabel && (label || !isIndeterminate)) {
    <div class="progress-label flex justify-between items-center mb-2 md:flex-col md:items-start md:gap-1">
      <span class="progress-label-text text-sm font-medium text-white">{{ getDisplayLabel() }}</span>
      @if (mergedConfig.showPercentage && !isIndeterminate) {
        <span class="progress-percentage text-sm font-semibold text-gray-400 md:text-xs">
          {{ getPercentageText() }}
        </span>
      }
    </div>
  }

  <!-- Progress Bar -->
  <div class="progress-wrapper relative bg-white/10 rounded-sm overflow-hidden shadow-[inset_0_1px_3px_rgba(0,0,0,0.2)]" [style]="getContainerStyles()">
    <div
      class="progress-track relative h-full transition-all overflow-hidden"
      [ngClass]="getProgressBarClasses()"
      [style]="getProgressBarStyles()"
      role="progressbar"
      [attr.aria-valuenow]="displayValue"
      [attr.aria-valuemin]="0"
      [attr.aria-valuemax]="max"
      [attr.aria-label]="ariaLabel || getDisplayLabel()"
      [attr.aria-valuetext]="isIndeterminate ? 'Loading' : getPercentageText()">

      <!-- Progress Fill -->
      <div class="progress-fill absolute top-0 left-0 h-full w-full bg-inherit transition-all" [class.progress-fill-indeterminate]="isIndeterminate">
        @if (isIndeterminate) {
          <div class="progress-indeterminate-bar absolute top-0 left-0 h-full w-[30%] bg-white/30"></div>
        }
      </div>

      <!-- Progress Text (overlay) -->
      @if (mergedConfig.showPercentage && !isIndeterminate) {
        <div class="progress-text absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xs font-semibold text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.5)] z-[2] md:text-[10px]">
          {{ getPercentageText() }}
        </div>
      }
    </div>
  </div>

  <!-- Status Indicator -->
  @if (!isIndeterminate) {
    <div class="progress-status mt-2 flex items-center gap-2">
      @if (isComplete()) {
        <span class="status-complete flex items-center gap-1 text-xs font-medium text-success-500 md:text-[10px]">
          <i class="fas fa-check-circle text-sm"></i>
          เสร็จสมบูรณ์
        </span>
      }
      @if (isWarning() && !isComplete()) {
        <span class="status-warning flex items-center gap-1 text-xs font-medium text-warning-500 md:text-[10px]">
          <i class="fas fa-exclamation-triangle text-sm"></i>
          ใกล้เสร็จ
        </span>
      }
      @if (isDanger() && !isComplete()) {
        <span class="status-danger flex items-center gap-1 text-xs font-medium text-error-500 md:text-[10px]">
          <i class="fas fa-exclamation-circle text-sm"></i>
          เกินกำหนด
        </span>
      }
    </div>
  }
</div>

