<app-page-layout
  title="Organization Structure"
  description="Manage company profile, departments, and positions."
  icon="ğŸ¢"
  [actions]="pageActions()">
  
  <!-- Tabs -->
  <app-tabs [tabs]="tabs()" [activeTab]="activeTab()" (activeTabChange)="onTabChange($event)">
    
    <!-- Company Info Tab -->
    @if (activeTab() === 'company-info') {
      <div class="space-y-6">
        <div class="glass-card p-6 md:p-8 animate-fade-in max-w-4xl mx-auto">
          <h3 class="text-xl font-semibold mb-6 text-slate-800 dark:text-white flex items-center">
              <span class="text-2xl mr-2">â„¹ï¸</span> Company Information
          </h3>
  
          <form (ngSubmit)="saveCompanyInfo()" #companyForm="ngForm" class="space-y-6">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <!-- Name -->
                  <div class="col-span-1 md:col-span-2">
                      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Company Name</label>
                      <input type="text" [(ngModel)]="companyFormData.name" name="name" required
                          class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 transition-all"
                          placeholder="Enter company name">
                  </div>
  
                  <!-- Tax ID -->
                  <div>
                      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Tax ID</label>
                      <input type="text" [(ngModel)]="companyFormData.tax_id" name="tax_id"
                          class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 transition-all"
                          placeholder="Tax Identification Number">
                  </div>
  
                  <!-- Phone -->
                  <div>
                      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Phone Number</label>
                      <input type="text" [(ngModel)]="companyFormData.phone_number" name="phone_number"
                          class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 transition-all"
                          placeholder="+66...">
                  </div>
  
                  <!-- Email -->
                  <div>
                      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Email</label>
                      <input type="email" [(ngModel)]="companyFormData.email" name="email" required email
                          class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 transition-all"
                          placeholder="contact@company.com">
                  </div>
  
                  <!-- Website -->
                  <div>
                      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Website</label>
                      <input type="url" [(ngModel)]="companyFormData.website" name="website"
                          class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 transition-all"
                          placeholder="https://www.company.com">
                  </div>
  
                  <!-- Address -->
                  <div class="col-span-1 md:col-span-2">
                      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Address</label>
                      <textarea [(ngModel)]="companyFormData.address" name="address" rows="3"
                          class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 transition-all"
                          placeholder="Company address..."></textarea>
                  </div>
              </div>
  
              <div class="flex justify-end pt-4 border-t border-slate-200 dark:border-slate-700">
                  <app-glass-button type="submit" [variant]="'primary'" [loading]="savingCompany()">
                      ğŸ’¾ Save Changes
                  </app-glass-button>
              </div>
          </form>
        </div>
      </div>
    }
    
    <!-- Departments Tab -->
    @if (activeTab() === 'departments') {
      <div class="space-y-6">
        <app-data-table
          [columns]="deptColumns"
          [data]="departments()"
          [actions]="deptActions"
          [searchable]="true"
        >
          <div actions>
            <app-glass-button (clicked)="loadDepartments()">
              ğŸ”„ {{ 'common.refresh' | translate }}
            </app-glass-button>
          </div>
        </app-data-table>
  
        <!-- Department Modal Form -->
        <app-modal-form
          [isOpen]="showDeptModal()"
          [title]="editingDept() ? 'Edit Department' : 'Add Department'"
          [fields]="deptFormFields()"
          [loading]="savingDept()"
          [submitLabel]="'common.save' | translate"
          [cancelLabel]="'common.cancel' | translate"
          (closed)="closeDeptModal()"
          (submitted)="onDeptFormSubmitted($event)"
        />
      </div>
    }
  
    <!-- Positions Tab -->
    @if (activeTab() === 'positions') {
      <div class="space-y-6">
        <app-data-table
          [columns]="posColumns"
          [data]="positions()"
          [actions]="posActions"
          [searchable]="true"
        >
          <div actions>
            <app-glass-button (clicked)="loadPositions()">
              ğŸ”„ {{ 'common.refresh' | translate }}
            </app-glass-button>
          </div>
        </app-data-table>
  
        <!-- Position Modal Form -->
        <app-modal-form
          [isOpen]="showPosModal()"
          [title]="editingPos() ? 'Edit Position' : 'Add Position'"
          [fields]="posFormFields()"
          [loading]="savingPos()"
          [submitLabel]="'common.save' | translate"
          [cancelLabel]="'common.cancel' | translate"
          (closed)="closePosModal()"
          (submitted)="onPosFormSubmitted($event)"
        />
      </div>
    }
  </app-tabs>
</app-page-layout>
