<div class="space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <h1 class="text-4xl font-bold text-white gemini-glow-text">
      Live Monitoring & Analytics
    </h1>
    <div class="flex space-x-2">
      <app-glass-button (clicked)="loadCameras()" class="gemini-card-hover">
        üîÑ Refresh
      </app-glass-button>
    </div>
  </div>

  <!-- Error Message -->
  @if (errorMessage()) {
    <div class="p-4 bg-red-50 border border-red-200 rounded-lg">
      <p class="text-red-800 text-sm">{{ errorMessage() }}</p>
    </div>
  }

  <!-- Statistics -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <app-glass-card padding="sm" class="gemini-card-hover gemini-shimmer">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm text-gray-400">Total Cameras</p>
          <p class="text-2xl font-bold text-white gemini-glow-text">
            {{ cameras().length }}
          </p>
        </div>
        <span class="text-4xl ai-float gemini-glow-text">üìπ</span>
      </div>
    </app-glass-card>

    <app-glass-card padding="sm" class="gemini-card-hover gemini-shimmer">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm text-gray-400">Online</p>
          <p class="text-2xl font-bold text-green-400 gemini-glow-text">
            {{ onlineCamerasCount() }}
          </p>
        </div>
        <span class="text-4xl ai-float gemini-pulse-dot">‚úÖ</span>
      </div>
    </app-glass-card>

    <app-glass-card padding="sm" class="gemini-card-hover gemini-shimmer">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm text-gray-400">Active Alerts</p>
          <p class="text-2xl font-bold text-red-400 gemini-glow-text">
            {{ alerts().length }}
          </p>
        </div>
        <span class="text-4xl ai-float">üö®</span>
      </div>
    </app-glass-card>
  </div>

  <!-- Map Section -->
  <app-glass-card class="mb-6">
    <h2 class="text-2xl font-bold text-white mb-6 gemini-glow-text">
      üó∫Ô∏è Camera Locations Map
    </h2>
    @if (loading()) {
      <app-skeleton type="card" [count]="1"></app-skeleton>
    } @else {
      <app-map
        [options]="mapOptions"
        [markers]="mapMarkers"
        [apiKey]="googleMapsApiKey"
        [height]="'500px'">
      </app-map>
    }
  </app-glass-card>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Camera List -->
    <app-glass-card>
      <h2 class="text-xl font-bold text-white mb-4 gemini-glow-text">
        üìπ Cameras
      </h2>
      @if (loading()) {
        <app-skeleton type="text" [count]="5"></app-skeleton>
      } @else {
        <div class="space-y-2 max-h-[500px] overflow-y-auto">
          @for (camera of cameras(); track camera.id) {
            <div
              (click)="selectCamera(camera)"
              [class.bg-blue-500/20]="selectedCamera()?.id === camera.id"
              class="p-3 glass rounded-lg cursor-pointer gemini-card-hover transition-all"
            >
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium text-white">
                    {{ camera.name }}
                  </p>
                  <p class="text-sm text-gray-400">
                    {{ camera.location }}
                  </p>
                </div>
                <span [class]="camera.status === 'online' ? 'text-green-400' : 'text-red-400'">
                  {{ camera.status === 'online' ? 'üü¢' : 'üî¥' }}
                </span>
              </div>
            </div>
          }
        </div>
      }
    </app-glass-card>

    <!-- Video Player -->
    <app-glass-card customClass="lg:col-span-2">
      <h2 class="text-xl font-bold text-white mb-4 gemini-glow-text">
        üì∫ Live Feed
      </h2>
      @if (selectedCamera()) {
        <div class="space-y-4">
          <div class="glass rounded-lg p-1 bg-black aspect-video flex items-center justify-center">
            <!-- Video Player will be attached here -->
            <video #videoPlayer controls class="w-full h-full rounded-md"></video>
          </div>
          <div class="flex justify-center space-x-2">
            <app-glass-button class="gemini-card-hover">‚è∏Ô∏è Pause</app-glass-button>
            <app-glass-button class="gemini-card-hover">üì∏ Snapshot</app-glass-button>
            <app-glass-button class="gemini-card-hover">‚è∫Ô∏è Record</app-glass-button>
          </div>
        </div>
      }
      @if (!selectedCamera()) {
        <div class="text-center py-16 text-gray-400">
          Select a camera to view live feed
        </div>
      }
    </app-glass-card>
  </div>

  <!-- Recent Alerts -->
  <app-glass-card>
    <h2 class="text-xl font-bold text-white mb-4 gemini-glow-text">
      üö® Recent Alerts
    </h2>
    @if (loading()) {
      <app-skeleton type="text" [count]="3"></app-skeleton>
    } @else {
      <div class="space-y-2">
        @for (alert of alerts(); track alert.id) {
          <div class="p-4 glass rounded-lg flex items-start justify-between gemini-card-hover">
            <div class="flex items-start space-x-3">
              <span class="text-2xl ai-float">{{ getAlertIcon(alert.type) }}</span>
              <div>
                <div class="flex items-center space-x-2">
                  <p class="font-medium text-white">
                    {{ alert.type.toUpperCase() }}
                  </p>
                  <span [class]="getAlertColor(alert.severity)" class="text-xs font-medium">
                    {{ alert.severity.toUpperCase() }}
                  </span>
                </div>
                <p class="text-sm text-gray-400">
                  {{ alert.cameraName }} ‚Ä¢ {{ formatTimestamp(alert.timestamp) }}
                </p>
                <p class="text-sm text-gray-300 mt-1">
                  {{ alert.description }}
                </p>
              </div>
            </div>
            <app-glass-button size="sm" (clicked)="acknowledgeAlert(alert)" class="gemini-card-hover">
              ‚úì Acknowledge
            </app-glass-button>
          </div>
        }
        @if (alerts().length === 0) {
          <div class="text-center py-8 text-gray-400">
            No recent alerts
          </div>
        }
      </div>
    }
  </app-glass-card>
</div>

