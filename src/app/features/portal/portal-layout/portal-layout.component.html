<div class="portal-layout h-screen flex flex-col overflow-hidden bg-slate-50 dark:bg-slate-900 transition-colors duration-300">
  <!-- Animated Background Graphics handled globally -->

  <app-header [sidebarOpen]="sidebarOpen()" (toggleSidebar)="toggleSidebar()" class="shrink-0 z-40 relative" />

  <!-- Mobile Overlay Backdrop -->
  <div *ngIf="sidebarOpen()" class="fixed inset-0 bg-black/50 z-[35] lg:hidden transition-opacity backdrop-blur-sm"
    (click)="closeSidebar()" style="pointer-events: auto;"></div>

  <!-- Main Container: Flex Row -->
  <div class="flex flex-1 relative z-10 overflow-hidden">
    
    <!-- Sidebar: Fixed width (handled by component), Height 100% of this container -->
    <app-sidebar [menuItems]="menuItems" [isOpen]="sidebarOpen()" (close)="closeSidebar()" class="h-full shrink-0" />

    <!-- Content Area: Scrollable independently -->
    <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto overflow-x-hidden relative scroll-smooth no-scrollbar-custom">
      <router-outlet></router-outlet>
    </main>
  </div>

  <app-error-toast />
</div>
