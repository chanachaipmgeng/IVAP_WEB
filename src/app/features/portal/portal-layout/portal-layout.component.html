<div class="portal-layout relative h-screen w-full flex flex-col overflow-hidden bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 transition-colors duration-500 ease-out">

  <!-- Decorative Background Gradient (Subtle) -->
  <div class="absolute inset-0 z-0 pointer-events-none opacity-40 dark:opacity-20 bg-gradient-to-br from-blue-50/50 via-slate-50/50 to-indigo-50/50 dark:from-slate-900 dark:via-slate-950 dark:to-indigo-950/30"></div>

  <!-- Animated Background Graphics handled globally -->

  <!-- Header -->
  <app-header
    [sidebarOpen]="sidebarOpen()"
    (toggleSidebar)="toggleSidebar()"
    class="shrink-0 z-30 relative shadow-sm dark:shadow-slate-900/50 transition-all duration-300"
  />

  <!-- Mobile Overlay Backdrop -->
  @if (sidebarOpen()) {
    <div
      class="fixed inset-0 z-40 lg:hidden  transition-all duration-300 ease-in-out cursor-pointer"
      (click)="closeSidebar()"
      role="button"
      aria-label="Close sidebar overlay">
    </div>
  }

  <!-- Main Container: Flex Row -->
  <div class="flex flex-1 relative z-10 overflow-hidden">

    <!-- Sidebar -->
    <app-sidebar
      [menuItems]="menuItems"
      [isOpen]="sidebarOpen()"
      (close)="closeSidebar()"
      class="h-full shrink-0 transition-transform duration-300 ease-in-out"
    />

    <!-- Content Area -->
    <main class="flex-1 relative overflow-y-auto overflow-x-hidden scroll-smooth custom-scrollbar">
      <!-- Inner Wrapper for consistent spacing -->
      <div class="min-h-full p-4 md:p-6 lg:p-8 xl:p-10 transition-all duration-300">
        <div class="max-w-[1920px] mx-auto w-full">
           <router-outlet></router-outlet>
        </div>
      </div>
    </main>
  </div>

  <app-error-toast />
</div>
